<!doctype html>
<html lang="en"  data-ng-app data-ng-csp >

  <head >
    <meta charset="UTF-8">
    <link href='src/css/css.css' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="src/js/libs/bootstrap.min.css">
    <link href='src/css/style.css' rel='stylesheet' type='text/css'>

    <script src="settings.js"></script>
  </head>

  <body ng-app="drivein">
    <style>
    [ng\:cloak], [ng-cloak], [data-ng-cloak], [x-ng-cloak], .ng-cloak, .x-ng-cloak {
      display: none !important;
    }

    body{
      height: 100%;
      margin: 0;
      padding:0;
    }
    </style>

    <!-- layout ctrl handle google api stuff -->
    <div id="drive-starter" ng-cloak ng-controller="starterCtrl">
      <div id="layout" ng-cloak ng-controller="layoutCtrl">
      <div id="menu-container">
        <aside>
          <a ng-href="#/1P-Uo8eBwhBfpngbUTk3-k5H8jsXe4P-g"><h1>{{title}}</h1></a>
          <ul>
            <li ng-repeat="folder in folders" class="{{path == folder.slug? 'selected': '1P-Uo8eBwhBfpngbUTk3-k5H8jsXe4P-g'}}">
              <a ng-href="#/{{fileId}}/{{folder.slug}}">{{folder.title}}</a>
            </li>
          </ul>
        </aside>
      </div>
        <div id="wrapper">
          <div class="inner">


            <div id="login" ng-if="app_status == 'APP_STATUS_AUTHORIZATION_REQUIRED'">
              <h2>login with your google account</h2>
              <p>
                Note that if the google drive-folder specified
              it is not "public" it should be shared with your google account!
              </p>
              <button class="btn btn-primary" ng-click="authorize()">authorize drive-in

              </button>

            </div>
            <div class="page" ng-view>
            </div>

          </div>
        </div> <!-- cfr app.js and templates are under src/views -->

      </div>
    </div>
    <!-- eof #drive-starter -->

    <!-- cdn resources -->
    <script src="src/js/libs/jquery-2.1.1.min.js"></script>
    <script src="src/js/libs/jquery.csv-0.71.min.js"></script>
    <!--

        bibtext/markdown interpreters
        =============================
    -->
    <script src="src/js/libs/showdown.min.js"></script>



    <!--

        angular libraries
        ==================
    -->
    <script src="src/js/libs/angular.min.js"></script>
    <script src="src/js/libs/angular-route.min.js"></script>
    <!-- script src="src/js/libs/angular.min.js"></script>
    <script src="src/js/libs/angular-route.min.js"></script -->



    <!--

          angular app
          ===========
    -->
    <script src="src/js/app.js"></script>
    <script src="src/js/services/gdoc-parser.js"></script>
    <script src="src/js/controllers/starter.js"></script>
    <script src="src/js/controllers/layout.js"></script>
    <script src="src/js/controllers/index.js"></script>
    <script src="src/js/controllers/page.js"></script>
    <script src="src/js/directives/gdoc.js"></script>



    <!--

          big init
          ========
    -->
    <script>
    /*
      Onload fnctio called after google drive api initialization (it takes more than one may expects)
    */
    function load() {
      //console.log('google drive loaded.');
      var scope = angular.element($("#drive-starter")).scope(); // cfr StarterCtrl in controllers.js
      scope.$emit('GOOGLE_CLIENT_INITIALIZED', settings);
    }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=load"></script>

  </body>
</html>
